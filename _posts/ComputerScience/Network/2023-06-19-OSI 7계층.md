---
layout: post
title: "OSI 7계층"
category: ComputerScience
description: >
  OSI 7계층에 대해서 각 계층을 알아보고 더욱 파헤쳐 보자
image:
  path: /assets/img/network/osi7_1.png
tags: Network
---

<aside>
💡 강의를 보면서 기록을 하여 네트워크와 HTTP 에 대한 지식을 재정리

</aside>
<!--more-->


# OSI 7계층
{:.no_toc}

* this list will be replaced by the toc
{:toc .large-only}

![osi_img_01.png](/assets/img/network/osi7_1.png)

### 1층 물리계층 (비트)

- bit : 01001011100111001
  - 컴퓨터는 0과 1밖에 모른다
    0과 1은 비트 , 랜선을 통해서 0과 1데이터가 왓다갓다(전기신호)
    비트도 검증코드 확인작업이 있을수 있다.
    ~~컴퓨터가 알아서 해줌~~

### 2층 데이터 링크 계층 (프레임)

- MAC주소 , IP 헤더 , TCP 헤더 , 데이터

**데이터링크**

- 실제 데이터를 보는 방법은 **와이어샤크** 라는 도구를 씀
- 데이터 예시 : 010 1100 1100 1100 11100 가 있으면 전체를 묶어서 **프레임**이라고 부름
- 앞에서부터 목적지 출발지 유형 데이터 트레일러 등 - 예시 비트를 짤라서 이러한 데이터를 보냄
- 데이터 링크에서는 MAC주소라는것을 활용함 목적지 , 출발지 등에는 MAC주소가 담긴다
- MAC주소 -> 블루투스나 이런것을 연결할 때 00-0C-29-6C-F3-ES이런 것을 보게 되는데 이것이 **랜카드의 ID**
- 처음부터 정해진 비트로 1:1관계로 연결되어서 비효율적이라고 생각할수있지만 스위치, 허브 를 통하여 서로 다른 입출구를 사용

![허브 ,스위치 모습](/assets/img/network/switch.png)

허브 ,스위치 모습

**이더넷**

- **프로토콜** 이란 약속이라 볼수있음 서로의 컴퓨터에선 같은 값에 서로다른 뜻을 부여할수있으므로 프로토콜이란 정의하에 같은 뜻을 전달
- 허브 , 스위치에 연결된 MAC주소끼리는 데이터 전송이 가능
- WIFI도 이더넷과 비슷한 하나의 프로토콜 데이터링크 계층이라고 볼수있다. AP(access point)

ex) 출발지가 내컴퓨터 비트를 가르킨다면 도착지는 와이파이 비트를 가르킴

### 3층 네트워크 계층 (패킷)

- IP 헤더 , TCP 헤더 , 데이터

**네트워크**

- 예) 192.35.15.17 ->32bit ipv4
- ip란 mac주소들이 모여있는 주소 하지만 mac주소가 너무 많아졌다 . (0~255 개수는 256 = 2^8 2의 8승 01이 8자리)
- 255.255.255.255 최대치를 뽑더라도 43억 < 인구수 80억
- 네트워크가 고갈되다 보니까 ipv6 128bit 가 나왔지만 익숙하지않아 ipv4를 쓰는곳이 매우 많다. 고갈됬는데 안넘어가는이유는 사설 ip때문!
- 예를들면 192.168.0.15 -> 요거는 사설ip 일확률 99.99%
- 아이피에는 공인 ip와 사설ip 가있음 공인 ip 를 알아야 다른사람과 소통이 가능
- 사설 ip는 보통 192.168과 172.16~172.31 그리고 10으로 시작한다 ipv6는 128bit 라서 복잡함 알파벳도 들어가있고
- MAC주소들이있는 스위치 그 스위치들이 모여있는 **라우터** 라우터는 스위치보다 클수있고 그것은 하나의 네트워크를 구성함
- > **하나의 건물에서 하나의 라우터를 사용시 옆건물 네트워크에 진입할때 프레임을보면 목적MAC + 출발지 MAC + 네트워크데이터 + 트레일러가 있다 네트워크 데이터에는 위와같이 목적ip(옆건물 네트워크ip) + 출발 ip (내라우터(내건물 네트워크ip)) + 전송계층데이터 로 이루어진다 패킷 -> 목적ip(옆건물 네트워크ip) + 출발 ip (내라우터(내건물 네트워크ip)) + 전송계층데이터**
  > 라우터 네트워크 ip는 공인ip그 내부 네트워크가 더필요하다면 사설ip를 이용해 사용할수있음
- 네트워크에는 대표 주소인 IP가 있다 그러나 개수 한정으로 내부 네트워크는 사설 ip를 씀 예를들면 공유기에 공인 ip를 받는 랜선을 꼽고 거기서 사설ip를 생산해 내부에 뿌림
- **가끔가다 192.168.0.255 보는데 이것은 브로드캐스트라고 불림 255번한테 데이터를 보내면 네트워크 내부 전체한테 전송이 됌**
- 특수 IP 127.0.0.1 = [localhost](http://localhost/) 내컴퓨터를 가리킴

### 4층 전송 계층 (세그먼트)

- TCP 헤더 , 데이터

**전송 계층 데이터**

포트 ex) 15.163.24.8 : 포트번호

- 80 -> HTTP
- 443 -> HTTPS
- 22 -> SSH
- 53-> DNS
- SMTP

0~1023 well known port 잘알려진 포트

포트를 통해서 목적지 어떤 데이터를 어떻게 처리해야되나 , 오류체크 등

전송계층 데이터는 **세그먼트** 라고 말함

- **세그먼트 = TCP헤더 + 데이터(세션계층 데이터)**
- **프로토콜** -> **TCP / UDP**
  **TCP** (http 1.1 , http 2 )
  3way handshake 라는 것을 활용하여 연결 맺었는지 확인 및 데이터를 받았는지 확인
  **UDP** (http3) -> 세그먼트의경우 UDP헤더 + 데이터
  확인하지않고 그냥 날림 / 동영상이나,사진 등 멀티미디어를 보낼때 UDP 프로토콜을 사용함 **TCP의 많은 프로세스에 비해 빠름**
  tcp헤더가 udp헤더보다 용량이 훨 큼 따라서 tcp헤더가 약간 더 느림

### 5층 세션 계층 , 6층 표현 계층 , 7층 응용 계층

- 데이터

**세션 표현 응용** **http 데이터**

HTTP 데이터 = HTTP 헤더 + HTTP 본문 (body)로 구성

HTTP 헤더 = 요청/응답

예 ) 요청 : get/index.html , host:[eundol.com](http://eundol.com/) 등이 0101001101 이렇게 바뀌어서 전달됨

암호화는 세션층! => HTTPS (ssl/tls)

표현 UTF-8 , ASC|| , jpg , png 등

## 정리

---

![tcp/ip 모델 과 osi 7계층 모델](/assets/img/network/tcp%3Aip_osi7.png)

tcp/ip 모델 과 osi 7계층 모델

![http](/assets/img/network/httpFrame.png)

**보낼때**

- HTTP 헤더(post/users) = 본문 응용계층
- HTTPS 암호화 = 세션계층
- TCP헤더 443 = 전송계층
- IP주소 목적지 = 출발지 네트워크 계층
- MAC주소 목적지 = 출발지 데이터링크 계층
- 1010110비트 = 물리 계층

**받을 때**

받는쪽은 전기신호가오면 프레임으로 바뀌고 하나하나 분해하여 필요한것을 데이터로 가져옴 (ex) post/users

### 내컴퓨터에서 다른컴퓨터로 데이터 전송되는 전체과정

다른 컴퓨터 -> NAVER일경우 https(443) dns를통해 ip주소를 알수있음

- 목적지 Ip = 네이버 ip
- 출발 ip = 내 ip
- 출발 포트 = 내포트
- 목적지 포트 = 443
- 출발 MAC = 내 MAC
- 목적지 MAC = 내 네트워크(라우터) MAC주소

처음 내라우터 -> 네이버 라우터 -> 네이버 라우터 MAC -> Naver Server -> http 요청 읽고 응답 response 역순

